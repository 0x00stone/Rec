package com.revers.rec.net;

import com.revers.rec.RecApplication;
import com.revers.rec.config.AccountConfig;
import com.revers.rec.net.Server.Server;
import com.revers.rec.util.cypher.DigestUtil;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.Map;
import java.util.concurrent.*;

import static com.revers.rec.util.cypher.RsaUtil.createKeys;


@RunWith(SpringRunner.class)
@SpringBootTest(classes = RecApplication.class)
public class testServer {

    @Test
    public void testServer_a2() throws ExecutionException, InterruptedException {
        String publicKey = "MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAsyI7hsTBlFql9ySUvOhC7c6qCK1LIjbviwv2DPgeHziSnM6eT8Blp43oGISu0YEJJitvYhln0BA2CfihcFHcOPW5hSZdYGLjiS_pm9WfFMU4MNf2Qsck8OxN5NPdnQfXjZofghjc-eFGI5zgjw2Dm6Q8xyZ03ZG689H6K2sjfwAL1ttAmUppVjsL9MEDhWY7UYl-9Pl2DrFjvUFmpjOA95wJ8LteijudxBtkrbHeOd6jR31dVn_Z-CKnjbnWiiBcbbausM9R3eEV0YaVf_oK4HXejKPqHOU8qaSGyEMeUdavNB-hnElgH_oBa71xNBEnRZin963Bca1dw64oNbA3Fg2qst0jErXUyjnstRexqrWB0PTb4DiHF1NEMML3XA8o8xNM_A3pytdiX0Qsbc7XoHtfXPXR822-J3P5K74Eghy9IEvNtWqix5ZUw9qRwKxNkGSHlEc45ztNuQUxOaVBFYlKkc4VihiLEpJuo4KFr963Oq1MG-PioP9oOEPb0wsGCS1pDT3SLWQ7SvM_zj7k7w8JxpoiF8YARreC6x1_X7blGwY0p_tKx51zM9zNGtHipRHYie3VHHOUagOZXpU4ITVSTLK4B6R2ceFUIgAFXEK05kgj7Eg1E1pohZbUWpGY4Ld5dPt_pkZWtRykpCHHvqDC-kuvbnnliZUwwkNt0-UCAwEAAQ";
        String privateKey = "MIIJQgIBADANBgkqhkiG9w0BAQEFAASCCSwwggkoAgEAAoICAQCzIjuGxMGUWqX3JJS86ELtzqoIrUsiNu-LC_YM-B4fOJKczp5PwGWnjegYhK7RgQkmK29iGWfQEDYJ-KFwUdw49bmFJl1gYuOJL-mb1Z8UxTgw1_ZCxyTw7E3k092dB9eNmh-CGNz54UYjnOCPDYObpDzHJnTdkbrz0forayN_AAvW20CZSmlWOwv0wQOFZjtRiX70-XYOsWO9QWamM4D3nAnwu16KO53EG2Stsd453qNHfV1Wf9n4IqeNudaKIFxttq6wz1Hd4RXRhpV_-grgdd6Mo-oc5TyppIbIQx5R1q80H6GcSWAf-gFrvXE0ESdFmKf3rcFxrV3Drig1sDcWDaqy3SMStdTKOey1F7GqtYHQ9NvgOIcXU0QwwvdcDyjzE0z8DenK12JfRCxtztege19c9dHzbb4nc_krvgSCHL0gS821aqLHllTD2pHArE2QZIeURzjnO025BTE5pUEViUqRzhWKGIsSkm6jgoWv3rc6rUwb4-Kg_2g4Q9vTCwYJLWkNPdItZDtK8z_OPuTvDwnGmiIXxgBGt4LrHX9ftuUbBjSn-0rHnXMz3M0a0eKlEdiJ7dUcc5RqA5lelTghNVJMsrgHpHZx4VQiAAVcQrTmSCPsSDUTWmiFltRakZjgt3l0-3-mRla1HKSkIce-oML6S69ueeWJlTDCQ23T5QIDAQABAoICADg9TaIEoN_yS7vZZMcgRm8B3LlHqtiNlcw6T6AHv_E-Yi1P4z0XovKlZ1JXScllsRkmNtx-LG0SwdyEji7EzJancvzeLB_IPDaEb9voh_7N4lPXYa3advsavWPTrnaQETkYQ78lDi93bf1dUdUnwYN6X0iJBtTPXXoSGPBLvUOwoIbupAvcZFDZzemkNXZKv-HcAJtpvIplX_J5l4AjmGBkwWwub0KH8AKzNPshZisV_n5B2i1_i0_PlXo196i6-znIynShSksWUTLMhaA9wO9yohHWnng-8joyeMxj4h-AftYm_iailMbFR2_rdKCLqCA-CrIEf8CwVMlMIrykW86Ot1RlyU9OU_puyfrKQL0PUk_jdW62KMCgyPtucvIxWZabsYNsshSyssyhZsQwEcjrl2Ry8p_7ihaWWlErT3nWFar7bk47HNlnC_291AHTrmdfTohmJNNHyWYjcgcokZusTyc9ayd1wMhSOnlWvdW3o0GMcSylqLICIDTmUymdtRuiRbioKreU4VtYB78YJjojIm4b3H9IUBSS0S5t4LXlwyRzqb0UQsKLYaG8RkCfJ-NVh0nyHrmMFO_HxmC22vIYXtLyBFL7yQCrczZ8iZU__Bi9UiROiBKWSkdITnQE2cfOW9onPz1HHtdSlJ06ZI_qyDH6sRDfvtoyLEjXF8_bAoIBAQDTkSl8U9yKvlnkychJHi1GX8GgkeSGHjgDH4JiapaGsABQZF-cBjK_QdQapLdzuwBoCtrCcqgyR8A68baQGAhEp4jUXq9Etl1jFvxRAAT6qQ0_WlelCkJI18AwYd-QvnHfjuqpNakmTPwvmpUGh-TIYt2ZKCYrDyLAsPdDatF1JFeWeuva865KYBsJ90xKX8aMLw79pVe1RS0-WpKCdsZWpyTTgO1JGozJHw47K62SYgdairAl46E0cD7V_bzAuAmpF8AnfVDiuNuepbKhsIH908TA16nmh8WzMzXWET-mM_QCdfb3L_VgR2weji2B5yyZstCg0edoLSyWnhMkVjJfAoIBAQDYwU2LEOdz0FAC3Wq6tk-qYIwQHyGBx9agynSXWiS3f-j8E_nmdTj9kEMlQfFbmoadUft8srl1wJfaXZGDsNPHurPAjTf8SqgM8KRMNvq8LzCgm8syoX2w9sjmhni_lyjLEs7x7qFTSXb3gAj4SNzOERzDe4gZBfZDN5e3Oc7eCtXI57xyH-NxwnMfzyDaXowWB5xwyizHj69DeTdHbY5gqIl9GLYsY6rZWmKcVi9mbVGVpzpeiF6WxTaSh3OOMeg9SqOGtA3nwdlRLxkuBLQ6E1Gy29aTalBxHk_G3KtcZRJt79VyBqmY0xqds1P6z-NZrsavyRwIf3K5Wi27isg7AoIBAB4kS03MQNp_fh0rZl6MbxTcpaBzyKQXABHp1lChMOrlflX1xu1asLYw8cAOAZj6ZndsPHiBj1cCg--h6kmjMuJdIBBpoPzgInPwnWgI4ay4kwuYmm4IBSONoXMDLq_Xgi_Ak8whugSb6T36_wpcKAsokru0TaPK1z-utrujJ05SLCxjPOEH4Kf2A0QrOHJMLORh-_fFK7bGsUh17POralyEGaoMb0IAB1jMFOH3OhZl4vhSVABB6wCmkT05lj-6uJ2fpZ-6qeBzR87VepqwpAR-vERhNXKDm3YJcL0b3f6W3kfPeK0E5yedZVkBFpiwT9lh8XlIDnj4HqcixEVkBm8CggEAasqqSsb0UeIjWZX_fKhQDdBtkY_U8V0lCKlW0i8Ogf4aKwAoknvUrVEDU_ruUESM6Du5HRHtP--4oVSSWgCoBvKcl1S8bafWrjFtsUMxO8BARBEeBv77r1GXX8SG_1YZOhw1K4t3nlJGs-A4CyPS7hAOTN2zCykd0LY2IIbxvgI2nDpYZR4C8ExubhCdzhjhCgWL9SIW9-d54VN6gc2fZU4EF0cykiI0zcuzY_Uue1eG56Wxo1uqxru5jG4B59_83R3F_Zr-ct3WFSKQVFTq-uYDzYx0ZsLtiR33DjIwl2AQuWt9jSVtL6dqqKHu0VbVW505tOfv0NwCCQI-H_VbewKCAQEAiBffaNyNv2gNwZkB74gyIX0jWf8qKLbCfA1TZfU7OVX-9fTWaPyMVamC2sl10ryfw6PL_YAQK-GmGyAyrjXOBYGgpywMxtgxjigSjY_Hm_iYLuWLj7ChoLR7jSemVh8X0D_sW8oayJ6wMOdRVTSeQyAvh_WyxPfma1OxSFAT5U_1SzSyAitrZfaTjNbG7UWNiyvmB9mkVyr5GLi2PoWqz4v0HjSBhjc5It_bkX1AvULgk_uic-d0FIn4sNDDqKiAkm7_ZWGi6yP50vyz7B10z8h2KK4xmEaMKo40dVzgjBDBnB7e_Wmc9w1o6LPVT5wliLjmA2gV3jo6QsBqKQ1M1g";

        AccountConfig.setId(DigestUtil.Sha1AndSha256(publicKey));
        AccountConfig.setPublicKey(publicKey);
        AccountConfig.setPrivateKey(privateKey);
        AccountConfig.setIpv6("127.0.0.1");

        new Thread(new Server()).start();
        while (true){}
    }

    @Test
    public void testServer2() throws ExecutionException, InterruptedException {
        Map<String, String> keyMap = createKeys(4096);
        String publicKey = keyMap.get("publicKey");
        String privateKey = keyMap.get("privateKey");

        AccountConfig.setId(DigestUtil.Sha1AndSha256(publicKey));
        AccountConfig.setPublicKey(publicKey);
        AccountConfig.setPrivateKey(privateKey);
        AccountConfig.setIpv6("127.0.0.2");
        AccountConfig.setIpv6Port(30000);

        new Thread(new Server()).start();
        while (true){}
    }

}
